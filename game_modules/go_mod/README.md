# zu_mod (Go)

Короткая инструкция по сборке модуля.

## Требования
- TinyGo (версия с поддержкой `-target=wasi` и `-target=wasip2`)

## Сборка

- Сборка как обычного WASI-модуля (рекомендуется, если компонент не обязателен):

```bash
# из каталога проекта (go_mod)
tinygo build -target=wasi -o ./zu_mod.wasm ./main.go
```

- Сборка как компонента (wasip2) c WIT миром `zu-mod` (потребуется готовый пакет `zu:engine@0.1.0.wasm`):

```bash
# из каталога проекта (go_mod)
# если у вас есть пакет WIT в файле в корне проекта
# (файл уже присутствует в репозитории):
#   ./zu:engine@0.1.0.wasm
# то можно попробовать собрать так:

tinygo build \
  -target=wasip2 \
  -o ./zu_mod.wasm \
  --wit-package ./zu:engine@0.1.0.wasm \
  --wit-world zu-mod \
  ./main.go
```

Примечания:
- Если сборка компонента жалуется на отсутствующие импорты `wasi:cli/environment@0.2.0`,
  добавьте соответствующие WIT-пакеты `wasi:cli`/`wasi:io` и укажите их через `--wit-package`.
  Компонентная сборка зависит от окружения и набора WIT-пакетов.
- Для большинства сценариев достаточно обычного `wasi`-модуля.
